<!DOCTYPE html>
<html class="h-100" lang="en">

<head>
  <!--
    /\      | |    | |     | |   (_)
   /  \   __| | ___| |_ __ | |__  _
  / /\ \ / _` |/ _ \ | '_ \| '_ \| |
 / ____ \ (_| |  __/ | |_) | | | | |
/_/    \_\__,_|\___|_| .__/|_| |_|_|
                     | |
                     |_|
 ______    _   _______        _
|  ____|  | | |__   __|      | |
| |__   __| |    | | ___  ___| |__
|  __| / _` |    | |/ _ \/ __| '_ \
| |___| (_| |    | |  __/ (__| | | |
|______\__,_|    |_|\___|\___|_| |_|

-->

  <title>Intalling Picroft</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <link rel="shortcut icon" type="image/ico" href="/au-courses/img/favicon.ico">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="/au-courses/css/main.css" rel="stylesheet">
  

</head>

<body class="d-flex flex-column h-100">

<div class="d-flex flex-row-reverse" style="z-index: 10">
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <button class="navbar-toggler bg-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="index.html">courses</a>
                    <a class="nav-link" href="plan-of-study.html">plan of study</a>
                    <a class="nav-link" href="steam-or-edtech.html">STEAM or ed tech?</a>
                    <a class="nav-link" href="thesis.html">thesis</a>
                    <a class="nav-link" href="https://online.adelphi.edu/graduate-degrees/ma-education-technology/">more info</a>
                </div>
            </div>
        </div>
    </nav>
</div>
<main class="container mx-auto mt-2"><p>% Intalling Picroft</p>

<style>
.sourceCode { padding-top: 1em;padding-bottom: 1em;}
footer {display: none}
</style>

<h1 id="installing-and-configuring-mycroft">Installing and Configuring Mycroft</h1>

<p>Please find these more detailed instructions on setting up and configuring
mycroft on your Raspberry Pi. To follow these instructions you will need
all of the equipment from the syllabus, including a card reader.</p>

<p><a href="https://mcuringa.github.io/adelphi-ed-tech-courses/intro-to-programming_python.html#required-hardware">See the full list here with links on where to get them.</a></p>

<h2 id="step-0-before-you-start">Step 0: Before you start</h2>

<ol>
  <li>Gather all of the components you will need.</li>
  <li>Create a mycroft account at <a href="https://sso.mycroft.ai/new-account">https://sso.mycroft.ai/new-account</a>, <small>you don’t need a paid account</small></li>
  <li>Download and install Etcher on your computer (not the Pi): <a href="https://www.balena.io/etcher/">https://www.balena.io/etcher/</a></li>
  <li>Download the Picroft OS “disk image”, and save it to your computer (Downloads,
Desktop, your CSC 602 folder, or anywhere else where you can find it easily).
Disk image link: <a href="https://mycroft.ai/to/picroft-image">https://mycroft.ai/to/picroft-image</a>. <small>don’t worry about skipping the google security check.</small></li>
</ol>

<h2 id="step-1-create-a-disk-image">Step 1: Create a disk image</h2>
<p>In this step we create a SD card that has a Operating System on it. This is
equivalent to (re)installing Windows or Mac OS, except it’s actually a lot easier.
<code class="language-plaintext highlighter-rouge">Picroft_Buster-Keaton_2020-01-10.zip</code> has a customized version of the linux
OS built for Raspberry Pi. This version comes with a wizard to set up Mycroft.</p>

<ol>
  <li>Insert an SD card into your card reader. If it’s a removable reader,
insert it into your computer.</li>
  <li>Open the Etcher program that you downloaded.</li>
  <li>Choose “flash from file” and choose the file <code class="language-plaintext highlighter-rouge">Picroft_Buster-Keaton_2020-01-10.zip</code> which you downloaded from Mycroft.</li>
  <li>Select your SD card. It will probably be the only drive, but if you have
other USB flash drives plugged in, you will have to select the right drive.
You can tell that you have the right drive by the size (e.g. 16GB or 8GB).</li>
  <li>Click “flash” and wait 4-10 minutes while the operating gets copied.</li>
</ol>

<p>For more information, watch <a href="https://www.youtube.com/watch?v=PijX8GDco-g">this step-by-step video on creating a disk image with Etcher</a>.</p>

<h2 id="step-2-boot-the-raspberry-pi">Step 2: Boot the Raspberry Pi</h2>
<p><em>We assume that you have a new Raspberry Pi Model 4.</em> If you have a Model 3,
we assume that you either know what you’re doing or will reach out for help.</p>

<p><img src="https://keytosmart.com/wp-content/uploads/2019/10/rpi-4-hardware-overview-1024x599.jpg" alt="rpi 4 schematic" /></p>

<p><strong>Do not power on your Raspberry Pi until you have completed all of the other steps!</strong></p>

<ol>
  <li>Slide the SD card out of your card reader and insert it into the SD slot on your RPI.</li>
  <li>Plug in your microphone, headphones/speakers, keyboard and mouse.</li>
  <li>Connect your RPI to your monitor with the micro HDM cable. There are two
HDMI out ports on your RPI. The small end of the cable plugs in here.</li>
  <li><em>ReSpeaker “Hat”.</em> If you are using the ReSpeaker 4-mic array recommended on
the syllabus, you should line it up with the pins labeled,
“40 pin General-purpose input/output Header” in the diagram above. Press the
hat carefully but firmly until you can’t see the pins anymore. The Hat will,
basically, cover your RPI at this point. <strong>Do not remove or add the ReSpeaker
while your RPI is running.</strong></li>
  <li>You are ready to boot the pi. Plug the USB-C cable into the RPI and then
plug the other end into a power adapter. If at all possible, plug it into
a higher powered adapter like an iPad charger, chromebook or macbook charger,
or high-speed USB phone charger. Otherwise, you might not have enough power
to run the RPI.</li>
</ol>

<p>You should now see the small LED light near the USB-C port light up. Next,
you should see the RPI Boot Screen appear on your monitor.
<a href="https://raspberrycoulis.files.wordpress.com/2015/10/raspi2boot.jpg?w=1400">It will look something like this</a>.</p>

<p>After waiting a minute or so, if you don’t see anything on your monitor/TV, you
should toggle through the “inputs” on your monitor to make sure it is configured
for the same HDMI port that your RPI is connected to.</p>

<p><em>If you don’t have a monitor and/or keyboard to use</em>, and are confident in your IT
skills, you can follow this guide to <a href="https://mycroft-ai.gitbook.io/docs/using-mycroft-ai/get-mycroft/picroft#ssh-into-picroft">ssh into mycroft</a>.</p>

<h2 id="step-3-configure-mycroft">Step 3: Configure Mycroft</h2>

<p>At this point you should see the Mycroft configuration wizard. To get started,
type <code class="language-plaintext highlighter-rouge">Y</code> and hit <code class="language-plaintext highlighter-rouge">enter</code> to start the wizard.</p>

<p><a href="https://mycroft-ai.gitbook.io/docs/using-mycroft-ai/get-mycroft/picroft#setting-up-picroft">Follow this guide from the mycroft documentation.</a></p>

<p>Notes:</p>

<ul>
  <li>you will need to know the <em>name</em> of your wireless netowrk (SSID) as well as the password in order to connect to the internet. if you’re not sure of the name, you can probably look at your phone or laptop to see the name of the network.</li>
  <li>for <strong>audio output</strong>, choose <em>headphones</em> to use the headphone jack, <em>HDMI</em> to use your monitor’s speakers, or <em>USB</em> to use USB speakers. If you’re not sure, we’re probably going to have to fix this later anyway.</li>
  <li>for <strong>microphone</strong>, choose option 5, <em>other</em>. Don’t worry if you can’t hear or record anything during the audio test at this point, just continue.</li>
  <li>to pair your device, even if you can’t hear mycroft, you can read the pairing code on the console.</li>
  <li>log in here to add the device <a href="https://home.mycroft.ai/devices/">https://home.mycroft.ai/devices/</a>. Follow the set-up wizard on the mycroft.ai website.</li>
</ul>

<p>If you’re not using ReSpeaker, there’s a chance that your Mycroft is perfectly up and running at this point. Awesome. If not, keep reading…</p>

<h2 id="step-4-respeaker-hat">Step 4: ReSpeaker Hat</h2>
<p>If you’re using the mic array hat, there is one more step you have to take. If
you are using a different microphone, skip this step.</p>

<p>You can follow the detailed installation documentation here, or you can
follow these steps.</p>

<p>To get started, hit <code class="language-plaintext highlighter-rouge">ctrl+c</code> (control-c key combination) on your keyboard
in order to exit the Mycroft debugger.</p>

<p>Type these commands one at a time and then hit enter. Read the message that
appears on the console. If there’s some kind of error message, you may
have mistyped the command. Do not enter the next command until the command
prompt is ready. You will see something like: <code class="language-plaintext highlighter-rouge">(.venv) pi@picroft:~ $ _</code>
when it’s ready for the next command.</p>

<p><em>1. stop mycroft</em></p>

<pre><code class="language-{.bash}">mycroft-stop
</code></pre>

<p><em>2. get the latest linux updates</em></p>

<pre><code class="language-{.bash}">sudo apt update
</code></pre>

<p>enter your password when prompted. the password is <code class="language-plaintext highlighter-rouge">mycroft</code>. you won’t see any output while typing, just type it and hit enter.</p>

<p><em>3. install linux updates</em></p>

<pre><code class="language-{.bash}">sudo apt upgrade
</code></pre>

<p><em>4. get the latest respeaker code</em>. note that there are 3 es in <code class="language-plaintext highlighter-rouge">seeed</code> (it took me 4 tries to figure this out)</p>

<pre><code class="language-{.bash}">git clone https://github.com/respeaker/seeed-voicecard.git
</code></pre>

<p><em>5. open the files you just downloaded</em></p>

<pre><code class="language-{.bash}">cd seeed-voicecard
</code></pre>

<p><em>6. run the respeaker installer</em>. This took a long time for me (15-20 minutes).</p>

<pre><code class="language-{.bash}">sudo ./install.sh  --compat-kernel
</code></pre>

<p><em>7. reboot your RPI with this command</em></p>

<pre><code class="language-{.bash}">sudo reboot
</code></pre>

<h2 id="step-5-fix-the-audio">Step 5: Fix the audio</h2>
<p>There’s a good chance that you followed all of these steps and your audio
still isn’t working. You can take a look at the troubleshooting techniques
offered on <a href="https://mycroft-ai.gitbook.io/docs/using-mycroft-ai/troubleshooting/audio-troubleshooting">this page by the mycroft team</a>.</p>

<p><strong>fixing a USB mic</strong></p>

<p>For me, with my USB microphone, I solved the problem with these steps by editing
the file <code class="language-plaintext highlighter-rouge">/etc/mycroft/mycroft.conf</code>.</p>

<p>Launch the text editor with this command (enter your password, <code class="language-plaintext highlighter-rouge">mycroft</code>, when prompted):
<code class="language-plaintext highlighter-rouge">sudo nano /etc/mycroft/mycroft.conf</code></p>

<p>Use the arrow keys to navigate the file, and then change the two lines to match this:</p>

<pre><code class="language-{.json}">{
  "play_wav_cmdline": "aplay %1",
  "play_mp3_cmdline": "mpg123 %1",
  [...]
}
</code></pre>

<p>The stuff in the square brackets <code class="language-plaintext highlighter-rouge">[...]</code> just means the rest of the text in the file.
Leave that alone. Once you make the changes, hit ctrl-o to save and ctrl-x to quit.
Run the <code class="language-plaintext highlighter-rouge">mycroft-stop</code> command to shutdown mycroft. Run <code class="language-plaintext highlighter-rouge">mycroft-start debug</code>
to start it again in debug mode.</p>

<p><strong>fixing respeaker mic</strong></p>

<p>I fixed the respeaker issues with the same procedure, except with different
settings in the file <code class="language-plaintext highlighter-rouge">/etc/mycroft/mycroft.conf</code>. Make the file match this:</p>

<pre><code class="language-{.json}">{
  "play_wav_cmdline": "aplay -Dhw:1,0 %1",
  "play_mp3_cmdline": "mpg123 -a hw:1,0 %1",
  [...]
}
</code></pre>

<p>Since we don’t all have the exact same hardware, these settings might not
work for you, or there might be other changes needed. For example, you may
also need to <a href="https://www.raspberrypi.org/documentation/configuration/audio-config.md">change the audio output with these instructions</a>.</p>

<p>In general, if you’re stuck on this step, post a message in <code class="language-plaintext highlighter-rouge">#code</code> and Daniel and I will find a time to work with you to straighten out the problem.</p>
</main>
<footer class="footer mt-auto py-3 bg-dark d-print-none d-fixed" style="z-index: 100">
    <div class="container">
        <div class="row d-flex align-items-end">
            <div class="col mb-2">
                <div class="d-flex align-items-end">
                    <img src="/au-courses/img/au-white.png" alt="adelphi university" class="d-block" style="font-size: 32px">
                    <a class="HomeLink d-block px-2 text-light link-offset-2 link-offset-3-hover link-underline-light
                                        link-underline-opacity-0 link-underline-opacity-100-hover" href="/au-courses/index.html">
                        Ed Tech Courses
                    </a>
                </div>

            </div>
            <div class="col mb-2">
                <a href="https://mixi.nyc"><img alt="mixi institute for stem and the imagination" src="/au-courses/img/mixi.png"
                        style="height: 32px;" /></a>
            </div>
            <div class="col mb-2">
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="/au-courses/img/cc-by-sa-hz.png"
                        alt="creative commons share alike attribution license"></a>
            </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<script src="/au-courses/js/boot_styles.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', addBootstrapStyles);
</script>

</body>
</html>
